\subsection{Summarization Model}
\label{sec:methods}

\input{strmsum/figures/clustsum.tex}


The summarizer takes as input the query string $\query$ and category
$\category$, as well as the period of interest, ($\timestamp_\starttok,
\timestamp_\stoptok$), i.e.  the time period of the stream on which to run the
summarizer. The summarizer works by incrementing the system time in hourly
batches, processing the newly observed sentences, and selecting some of them
to be updates, which are then added to the update summary. When the system
time exceeds $\timestamp_\stoptok$, the summarizer terminates, returning the
completed update summary.


%and processes
%the stream $\sentstream$ in hourly batches, selecting the next set of 
%updates for each hour.

 Pseudo-code for the SAP summarizer is shown in \autoref{alg:clustsum}.  The
algorithm starts with an empty update summary $\updateSummary$ and initial
system time $\systemtime_1 = \timestamp_\starttok + \delta_{hour}$
(\hyperref[alg:clustsum]{Alg. \ref{alg:clustsum} lines
\ref{alg:initstart}--\ref{alg:initstop}}).  System time is incremented in
hourly intervals, i.e. $\systemtime_{t} - \systemtime_{t-1} = \delta_{hour}$.
At each time $\systemtime_t$, we process the sentences that entered the stream
in the last hour,
$\sentstream^{(\query)}_{\systemtime_{t-1}:\systemtime_{t}}$, by performing
the following actions:
\begin{enumerate}
    \item predict the salience $\predbsal_i$ of sentences $\strmSent_i \in
\sentstream^{(\query)}_{\systemtime_{t-1}:\systemtime_{t}}$
(\hyperref[alg:clustsum]{Alg. \ref{alg:clustsum} lines
\ref{alg:salstart}--\ref{alg:salstop}}, \autoref{sec:salpred}),
    \item select a set of exemplar sentences $\mathcal{E}_t \subset
\sentstream^{(\query)}_{\systemtime_{t-1}:\systemtime_{t}}$ by combining
affinity propagation clustering with salience predictions
(\hyperref[alg:clustsum]{Alg. \ref{alg:clustsum} line \ref{alg:clust}},
\autoref{sec:exsel}),
    \item add the most novel and salient exemplars,
$\mathcal{U}_{\systemtime_t}$, to the update summary $\updateSummary$
(\hyperref[alg:clustsum]{Alg. \ref{alg:clustsum} lines
\ref{alg:filter}--\ref{alg:add}}, \autoref{sec:upsel}).
\end{enumerate}
Once the system time $\systemtime_t$ exceeds the period of interest (i.e.,
$\systemtime_t > \timestamp_\stoptok$), the summarizer returns collected set
of updates $\updateSummary$ as the summary of the event.
